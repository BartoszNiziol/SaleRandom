<!--
 - Created by BRITENET on 01.03.2021.
 -->

<apex:page id="HD_DoctorImportCSV" standardController="Doctor__c" extensions="HD_DoctorImportCSVController">
    <apex:pageBlock >
        <apex:form >
        <apex:pageBlockSection title="CSV File" columns="2">
            <apex:pageBlockSectionItem>
                <apex:inputFile value="{!inputCSV}">

                </apex:inputFile>
               <apex:commandButton value="Process" action="{!takeInputCSV}">


               </apex:commandButton>
            </apex:pageBlockSectionItem>

        </apex:pageBlockSection>
        </apex:form>
        <apex:form >
        <apex:pageBlockSection title="Doctors To Import" rendered="{!isDoctorsToImportSectionShowed}" columns="1">
            <apex:pageBlockTable value="{!inputDoctorsList}" var="doc">
            <apex:column headerValue="Is Import ?" id="isImportColumn">
                <apex:inputCheckbox value="{!doc.isSelected}"/>
            </apex:column>
                <apex:column  headerValue="First Name">
                <apex:outputField value="{!doc.doctor.First_Name__c}"/>
                </apex:column>
                <apex:column  headerValue="Last Name">
                    <apex:outputField value="{!doc.doctor.Name}"/>
                </apex:column>
                <apex:column headerValue="Email">
                    <apex:outputField value="{!doc.doctor.Email__c}"/>
                </apex:column>
                <apex:column headerValue="Birthdate">
                    <apex:outputField value="{!doc.doctor.Birthday_Date__c}"/>
                </apex:column>
                <apex:column headerValue="Status">
                    <apex:outputText value="{!doc.status}"/>
                </apex:column>
            </apex:pageBlockTable>
        </apex:pageBlockSection>
        <div style="float:left;">
                <apex:commandButton action="{!selectAll}" value="All" rendered="{!(isDoctorsToImportSectionShowed)}" reRender="isImportColumn"/>
                <apex:commandButton action="{!selectReverse}" value="Reverse" rendered="{!(isDoctorsToImportSectionShowed)}" reRender="isImportColumn" />
                <apex:commandButton action="{!selectNone}" value="None" rendered="{!(isDoctorsToImportSectionShowed)}" reRender="isImportColumn" />
        </div>
            <div style="text-align:right;">
                <apex:commandButton action="{!importDoctors}" value="Import" rendered="{!(isDoctorsToImportSectionShowed)}" />
<!--                                    disabled="{!NOT(isImportPossible)}"-->

            </div>
        </apex:form>
        <apex:pageMessages />
    </apex:pageBlock>
</apex:page>
